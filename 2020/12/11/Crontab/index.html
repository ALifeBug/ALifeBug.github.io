<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Crontab | ALifeBug</title><meta name="description" content="Crontab"><meta name="keywords" content="Linux"><meta name="author" content="Huang Qingshan"><meta name="copyright" content="Huang Qingshan"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://alifebug.github.io/2020/12/11/Crontab/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Crontab"><meta name="twitter:description" content="Crontab"><meta name="twitter:image" content="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Crontab"><meta property="og:url" content="http://alifebug.github.io/2020/12/11/Crontab/"><meta property="og:site_name" content="ALifeBug"><meta property="og:description" content="Crontab"><meta property="og:image" content="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="网络地址转换NAT原理及其作用" href="http://alifebug.github.io/2020/12/11/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E4%BD%9C%E7%94%A8/"><link rel="next" title="JVM调优" href="http://alifebug.github.io/2020/12/11/JVM%E8%B0%83%E4%BC%98/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">ALifeBug</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 其他</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">61</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">44</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">24</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 其他</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Crontab"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Crontab</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Cron-各项的描述"><span class="toc_mobile_items-number">1.0.1.</span> <span class="toc_mobile_items-text">Cron 各项的描述</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Crontab-示例"><span class="toc_mobile_items-number">1.0.2.</span> <span class="toc_mobile_items-text">Crontab 示例</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Crontab-选项"><span class="toc_mobile_items-number">1.0.3.</span> <span class="toc_mobile_items-text">Crontab 选项</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Crontab"><span class="toc-number">1.</span> <span class="toc-text">Crontab</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cron-各项的描述"><span class="toc-number">1.0.1.</span> <span class="toc-text">Cron 各项的描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Crontab-示例"><span class="toc-number">1.0.2.</span> <span class="toc-text">Crontab 示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Crontab-选项"><span class="toc-number">1.0.3.</span> <span class="toc-text">Crontab 选项</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Crontab</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-12-11<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-12-11</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/">Linux</a></span><div class="post-meta-wordcount"><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="Crontab"><a href="#Crontab" class="headerlink" title="Crontab"></a>Crontab</h1><p>crontab是linux系统或unix系统中常用的定时命令,使用crontab你可以在指定的时间执行一个shell脚本或者一系列Linux/unix命令。例如系统管理员安排一个备份任务使其每天都运行,也可以定义个命令每天定时清理垃圾文件,那么如何往 cron 中添加一个作业?</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> crontab –e</span></span><br><span class="line">0 5 * * * /root/bin/backup.sh</span><br></pre></td></tr></table></figure>

<p>这将会在每天早上5点运行 /root/bin/backup.sh</p>
<h3 id="Cron-各项的描述"><a href="#Cron-各项的描述" class="headerlink" title="Cron 各项的描述"></a>Cron 各项的描述</h3><p><strong>以下是 crontab 文件的格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;minute&#125; &#123;hour&#125; &#123;day-of-month&#125; &#123;month&#125; &#123;day-of-week&#125; &#123;full-path-to-shell-script&#125; </span><br><span class="line">o minute: 区间为 0 – 59 </span><br><span class="line">o hour: 区间为0 – 23 </span><br><span class="line">o day-of-month: 区间为0 – 31 </span><br><span class="line">o month: 区间为1 – 12. 1 是1月. 12是12月. </span><br><span class="line">o Day-of-week: 区间为0 – 7. 周日可以是0或7.</span><br></pre></td></tr></table></figure>

<h3 id="Crontab-示例"><a href="#Crontab-示例" class="headerlink" title="Crontab 示例"></a>Crontab 示例</h3><p>\1. 在 12:01 a.m 运行，即每天凌晨过一分钟。这是一个恰当的进行备份的时间，因为此时系统负载不大。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 0 * * * /root/bin/backup.sh</span><br></pre></td></tr></table></figure>

<p>\2. 每个工作日(Mon – Fri) 11:59 p.m 都进行备份作业。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">59 11 * * 1,2,3,4,5 /root/bin/backup.sh</span><br></pre></td></tr></table></figure>

<p>下面例子与上面的例子效果一样：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">59 11 * * 1-5 /root/bin/backup.sh</span><br></pre></td></tr></table></figure>

<p>\3. 每5分钟运行一次命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/5 * * * * /root/bin/check-status.sh</span><br></pre></td></tr></table></figure>

<p>\4. 每个月的第一天 1:10 p.m 运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 13 1 * * /root/bin/full-backup.sh</span><br></pre></td></tr></table></figure>

<p>\5. 每个工作日 11 p.m 运行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 23 * * 1-5 /root/bin/incremental-backup.sh</span><br></pre></td></tr></table></figure>

<h3 id="Crontab-选项"><a href="#Crontab-选项" class="headerlink" title="Crontab 选项"></a>Crontab 选项</h3><p>以下是 crontab 的有效选项:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab –e : 修改 crontab 文件. 如果文件不存在会自动创建。 </span><br><span class="line">crontab –l : 显示 crontab 文件。 </span><br><span class="line">crontab -r : 删除 crontab 文件。</span><br><span class="line">crontab -ir : 删除 crontab 文件前提醒用户。</span><br></pre></td></tr></table></figure>

<p>以上就是crontab命令的具体使用方法了。</p>
<p>在linux平台上如果需要实现任务调度功能可以编写cron脚本来实现。 以某一频率执行任务 linux缺省会启动crond进程，crond进程不需要用户启动、关闭。 crond进程负责读取调度任务并执行，用户只需要将相应的调度脚本写入cron的调度配置文件中。</p>
<p><strong>cron的调度文件有以下几个：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. crontab</span><br><span class="line">2. cron.d</span><br><span class="line">3. cron.daily</span><br><span class="line">4. cron.hourly</span><br><span class="line">5. cron.monthly</span><br><span class="line">6. cron.weekly</span><br></pre></td></tr></table></figure>

<p>如果用的任务不是以hourly monthly weekly方式执行，则可以将相应的crontab写入到crontab 或cron.d目录中。</p>
<p><strong>示例：</strong></p>
<p>每隔一分钟执行一次脚本 /opt/bin/test-cron.sh<br>可以在cron.d新建脚本 echo-date.sh<br>内容为</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * root  /opt/bin/test-cron.sh</span><br></pre></td></tr></table></figure>

<p>在指定的时间运行任务,也可以通过at命令来控制在指定的时间运行任务<br>如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">at -f test-cron.sh -v 10:25</span><br></pre></td></tr></table></figure>

<p>其中-f 指定脚本文件， -v 指定运行时间<br>首先用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">contab -l &gt;contabs.tmp</span><br></pre></td></tr></table></figure>

<p>导出contab的配置。<br>然后编辑contabs.tmp文件。以一下格式添加一行：<br>分钟 小时 天 月 星期 命令<br>比如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 3 * * 0,6 hello</span><br></pre></td></tr></table></figure>

<p>就是每周六、周日的3点10分执行hello程序。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15 4 * * 4-6 hello</span><br></pre></td></tr></table></figure>

<p>就是从周四到周六的4点15点执行hello程序。<br>然后用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">contab contabs.tmp</span><br></pre></td></tr></table></figure>

<p>命令导入新的配置。<br>一般不建议直接修改/etc/下的相关配置文件。<br>启动cron进程的方法：/etc/init.d/crond start<br>开机就启动cron进程的设置命令：chkconfig –add crond<br><strong>方法二：</strong><br>把cron加入到启动脚本中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rc-update add vixie-cron default</span></span><br></pre></td></tr></table></figure>

<p>crontab -l #查看你的任务<br>crontab-e#编辑你的任务<br>crontab-r#删除用户的crontab的内容<br><strong>实例讲解二：</strong><br>系统cron设定：/etc/crontab 通过 /etc/crontab 文件，可以设定系统定期执行的任务，当然，要想编辑这个文件，得有root权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 7   *    *   *    root    mpg123 ~/wakeup.mp3</span><br></pre></td></tr></table></figure>

<p>分 时 日 月 周<br>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 4  * * 0     root emerge --sync &amp;&amp; emerge -uD world              #每周日凌晨4点，更新系统</span><br><span class="line">0 2 1 * *     root   rm -f /tmp/*                                                    #每月1号凌晨2点，清理/tmp下的文件</span><br><span class="line">0 8 6 5 *   root     mail  robin &lt; /home/galeki/happy.txt             #每年5月6日给robin发信祝他生日快乐</span><br></pre></td></tr></table></figure>

<p>假如，我想每隔2分钟就要执行某个命令，或者我想在每天的6点、12点、18点执行命令，诸如此类的周期，可以通过 “ / ” 和 “ , ” 来设置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*/2   *   *   *   *           root      ...............      #每两分钟就执行........</span><br><span class="line">0 6,12,18   *   *   *    root      ...............      #每天6点、12点、18点执行........</span><br></pre></td></tr></table></figure>

<p>每两个小时</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 */2 * * * echo "have a break now." &gt;&gt; /tmp/test.txt</span><br></pre></td></tr></table></figure>

<p>晚上11点到早上8点之间每两个小时，早上八点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 23-7/2，8 * * * echo "have a good dream：）" &gt;&gt; /tmp/test.txt</span><br></pre></td></tr></table></figure>

<p>每个月的4号与每个礼拜的礼拜一到礼拜三的早上11点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 11 4 * 1-3 command line</span><br></pre></td></tr></table></figure>

<p>1月1日早上4点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 4 1 1 * command line</span><br></pre></td></tr></table></figure>

<p>收获：可以把经常要做的一些事放到其中，简化工作量，如每周一检查服务器的运行状态，查看报告，杀掉一些进程等等……</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*　　*　　*　　*　　*　　command</span><br></pre></td></tr></table></figure>

<p>分　时　日　月　周　命令<br>第1列表示分钟1～59 每分钟用<em>或者 */1表示<br>第2列表示小时1～23（0表示0点）<br>第3列表示日期1～31<br>第4列表示月份1～12<br>第5列标识号星期0～6（0表示星期天）<br>第6列要运行的命令<br>*</em>crontab文件的一些例子：**</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 21 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>上面的例子表示每晚的21:30重启apache。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>上面的例子表示每月1、10、22日的4 : 45重启apache。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>上面的例子表示每周六、周日的1 : 10重启apache。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>上面的例子表示在每天18 : 00至23 : 00之间每隔30分钟重启apache。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 23 * * 6 /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>上面的例子表示每星期六的11 : 00 pm重启apache。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* */1 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>每一小时重启apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>晚上11点到早上7点之间，每隔一小时重启apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>每月的4号与每周一到周三的11点重启apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 4 1 jan * /usr/local/etc/rc.d/lighttpd restart</span><br></pre></td></tr></table></figure>

<p>一月一号的4点重启apache<br>名称 : crontab<br>使用权限 : 所有使用者<br>使用方式 :<br>crontab file [-u user]-用指定的文件替代目前的crontab。<br>crontab-[-u user]-用标准输入替代目前的crontab.<br>crontab-1[user]-列出用户目前的crontab.<br>crontab-e[user]-编辑用户目前的crontab.<br>crontab-d[user]-删除用户目前的crontab.<br>crontab-c dir- 指定crontab的目录。<br>crontab文件的格式：M H D m d cmd.<br>M: 分钟（0-59）。<br>H：小时（0-23）。<br>D：天（1-31）。<br>m: 月（1-12）。<br>d: 一星期内的天（0~6，0为星期天）。<br>cmd要运行的程序，程序被送入sh执行,这个shell只有USER,HOME,SHELL这三个环境变量<br>说明 :<br>crontab 是用来让使用者在固定时间或固定间隔执行程序之用,换句话说,也就是类似使用者的时程表。-u user 是指设定指定<br>user 的时程表，这个前提是你必须要有其权限(比如说是 root)才能够指定他人的时程表。如果不使用 -u user 的话，就是表示设<br>定自己的时程表。<br>参数 :<br>crontab -e : 执行文字编辑器来设定时程表,内定的文字编辑器是 VI,如果你想用别的文字编辑器,则请先设定 VISUAL 环境变数<br>来指定使用那个文字编辑器(比如说 setenv VISUAL joe)<br>crontab -r : 删除目前的时程表<br>crontab -l : 列出目前的时程表<br>crontab file [-u user]-用指定的文件替代目前的crontab。<br>时程表的格式如下 :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1 f2 f3 f4 f5 program</span><br></pre></td></tr></table></figure>

<p>其中 f1 是表示分钟,f2 表示小时,f3 表示一个月份中的第几日,f4 表示月份,f5 表示一个星期中的第几天。program 表示要执<br>行的程序。<br>当 f1 为 * 时表示每分钟都要执行 program,f2 为 * 时表示每小时都要执行程序,其馀类推<br>当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行,f2 为 a-b 时表示从第 a 到第 b 小时都要执行,其馀类推<br>当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次,f2 为 */n 表示每 n 小时个时间间隔执行一次,其馀类推<br>当 f1 为 a, b, c,… 时表示第 a, b, c,… 分钟要执行,f2 为 a, b, c,… 时表示第 a, b, c…个小时要执行,其馀类推<br>使用者也可以将所有的设定先存放在档案 file 中,用 crontab file 的方式来设定时程表。<br>例子 :<br>#每天早上7点执行一次 /bin/ls :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 7 * * * /bin/ls</span><br></pre></td></tr></table></figure>

<p>在 12 月内, 每天的早上 6 点到 12 点中，每隔3个小时执行一次 /usr/bin/backup :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 6-12/3 * 12 * /usr/bin/backup</span><br></pre></td></tr></table></figure>

<p>周一到周五每天下午 5:00 寄一封信给 <a href="mailto:alex@domain.name">alex@domain.name</a> :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 17 * * 1-5 mail -s "hi" alex@domain.name &lt; /tmp/maildata</span><br></pre></td></tr></table></figure>

<p>每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分….执行 echo “haha”</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">20 0-23/2 * * * echo "haha"</span><br></pre></td></tr></table></figure>

<p>注意 :<br>当程序在你所指定的时间执行后,系统会寄一封信给你,显示该程序执行的内容,若是你不希望收到这样的信,请在每一行空一格之<br>后加上<code>&gt; /dev/null 2&gt;&amp;1</code>即可<br><strong>例子2 :</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">每天早上6点10分</span></span><br><span class="line">10 6 * * * date</span><br><span class="line"><span class="meta">#</span><span class="bash">每两个小时</span></span><br><span class="line">0 */2 * * * date</span><br><span class="line"><span class="meta">#</span><span class="bash">晚上11点到早上8点之间每两个小时，早上8点</span></span><br><span class="line">0 23-7/2，8 * * * date</span><br><span class="line"><span class="meta">#</span><span class="bash">每个月的4号和每个礼拜的礼拜一到礼拜三的早上11点</span></span><br><span class="line">0 11 4 * mon-wed date</span><br><span class="line"><span class="meta">#</span><span class="bash">1月份日早上4点</span></span><br><span class="line">0 4 1 jan * date</span><br></pre></td></tr></table></figure>

<p><strong>范例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">crontab -l 列出用户目前的crontab.</span></span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Huang Qingshan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://alifebug.github.io/2020/12/11/Crontab/">http://alifebug.github.io/2020/12/11/Crontab/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://ALifeBug.github.io">ALifeBug</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux    </a></div><div class="post_share"><div class="social-share" data-image="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.png"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.png"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/11/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E4%BD%9C%E7%94%A8/"><img class="prev_cover lozad" data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>网络地址转换NAT原理及其作用</span></div></a></div><div class="next-post pull-right"><a href="/2020/12/11/JVM%E8%B0%83%E4%BC%98/"><img class="next_cover lozad" data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>JVM调优</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/10/24/Linux/" title="Linux"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">Linux</div></a></div><div class="relatedPosts_item"><a href="/2020/12/11/Linux查看日志/" title="Linux查看日志"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">Linux查看日志</div></a></div><div class="relatedPosts_item"><a href="/2020/12/11/curl和wget的区别和使用/" title="curl和wget的区别和使用"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">curl和wget的区别和使用</div></a></div><div class="relatedPosts_item"><a href="/2020/12/11/Linux的配置文件/" title="Linux的配置文件"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">Linux的配置文件</div></a></div></div><div class="clear_both"></div></div></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2020 By Huang Qingshan</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">简</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>