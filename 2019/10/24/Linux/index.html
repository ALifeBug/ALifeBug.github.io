<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Linux | ALifeBug</title><meta name="description" content="Linux"><meta name="keywords" content="Linux"><meta name="author" content="Huang Qingshan"><meta name="copyright" content="Huang Qingshan"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://alifebug.github.io/2019/10/24/Linux/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Linux"><meta name="twitter:description" content="Linux"><meta name="twitter:image" content="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Linux"><meta property="og:url" content="http://alifebug.github.io/2019/10/24/Linux/"><meta property="og:site_name" content="ALifeBug"><meta property="og:description" content="Linux"><meta property="og:image" content="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="Kafka基础" href="http://alifebug.github.io/2019/10/24/Kakfa%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="next" title="设计模式概述" href="http://alifebug.github.io/2019/10/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">ALifeBug</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 其他</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">61</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">44</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">24</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 其他</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Linux"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Linux</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux用户管理"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">Linux用户管理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux文件管理"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">Linux文件管理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux文件系统"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">Linux文件系统</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux字符处理"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">Linux字符处理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux网络管理"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">Linux网络管理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Linux进程管理"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">Linux进程管理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Vi编辑器"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">Vi编辑器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#正则表达式"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">正则表达式</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux"><span class="toc-number">1.</span> <span class="toc-text">Linux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux用户管理"><span class="toc-number">1.1.</span> <span class="toc-text">Linux用户管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux文件管理"><span class="toc-number">1.2.</span> <span class="toc-text">Linux文件管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux文件系统"><span class="toc-number">1.3.</span> <span class="toc-text">Linux文件系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux字符处理"><span class="toc-number">1.4.</span> <span class="toc-text">Linux字符处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux网络管理"><span class="toc-number">1.5.</span> <span class="toc-text">Linux网络管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux进程管理"><span class="toc-number">1.6.</span> <span class="toc-text">Linux进程管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vi编辑器"><span class="toc-number">1.7.</span> <span class="toc-text">Vi编辑器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式"><span class="toc-number">1.8.</span> <span class="toc-text">正则表达式</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Linux</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-10-24<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-04-02</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Linux/">Linux</a></span><div class="post-meta-wordcount"><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="Linux用户管理"><a href="#Linux用户管理" class="headerlink" title="Linux用户管理"></a>Linux用户管理</h2><p><strong>UID</strong>：32位整数。分普通用户，根用户，系统用户。</p>
<p><strong>根用户</strong>：root用户，ID为0。</p>
<p><strong>系统用户</strong>：系统运行时必须有的用户，但不是真实的使用者。如apache,mysql。ID范围在1~499。</p>
<p><strong>GID</strong>：区分不同的用户组。</p>
<p><strong>确认自己的UID</strong>：<code>id</code></p>
<p><strong>确认自己的用户组</strong>：<code>groups</code></p>
<p><strong>查询当前在线用户</strong>：<code>who</code></p>
<p><strong><code>/etc/passwd</code></strong>:用户名:密码:UID:GID:家目录:登录shell 密码部分都为x</p>
<p><strong><code>/etc/shadow</code></strong>：保存密码，只有root用户可读，用户名：密码：密码最近修改日…</p>
<p><strong>新增用户</strong>：<code>useradd</code> 用户名 过程：修改<code>/etc/passwd</code>和<code>/etc/shadow</code>，分配UID，创建家目录，复制<code>/etc/skel</code>下文件到/home/用户名 目录下，最后新建一个和用户名一样的用户组.</p>
<p><code>-u</code> 指定UID <code>-g</code> 指定GID <code>-d</code> 指定家目录</p>
<p><strong>修改密码</strong>：<code>passwd</code> 用户名 只有root用户可以修改密码，普通用户不能修改自己的密码</p>
<p><strong>修改用户</strong>：<code>usermod -d /home/alice_new -m alice</code> <code>-m</code>参数在目录存在的情况下使用该目录作为新的家目录，不使用<code>-m</code>会报错目录不存在。 <code>usermod -L 用户名</code> 冻结用户 <code>usermod -U 用户名</code> 解锁用户 原理都是对<code>/etc/shadow</code>和<code>/etc/passwd</code>文件做修改</p>
<p><strong>删除用户</strong>：<code>userdel 用户名</code> 删除用户在<code>/etc/passwd</code>和<code>/etc/shadow</code>中的记录。使用<code>-r</code>参数同时删除用户的相关文件如家目录和邮件。</p>
<p><strong>增加用户组</strong>：<code>groupadd 组名</code> <code>/etc/group</code>文件用来记录用户组</p>
<p><strong>删除用户组</strong>：<code>groupdel</code></p>
<p><strong>查看用户</strong>：<code>users</code> 查看当前系统有哪些用户。 <code>who</code> 查看更多信息 <code>w</code> 查看更详细的信息</p>
<p><code>w</code>命令：登录的用户名 用户终端 远程ip 登录时间 闲置时间 与终端相关的当前所有运行进程消耗的CPU时间总量 当前WHAT列所对应的进程所消耗的CPU时间总量 用户当前运行的进程</p>
<p><strong>调查用户</strong>：<code>finger</code>显示系统的登录用户 <code>finger 用户名</code> 显示用户详细的信息</p>
<p><strong>切换用户</strong>：<code>su</code> 不加参数默认切换到root用户，完成后exit退回原来的用户 <code>su -</code> 切换到root用户后可以应用root的用户环境，即完全变成了root环境。root用户可以使用su命令切换成任意用户而不需要密码</p>
<p><strong>用其他用户的身份执行命令</strong>：<code>sudo</code></p>
<p><strong>单一时刻执行一次任务</strong>：<code>at</code> 如 <code>at now + 30 minutes >/sbin/shutdown -h now ><EOT></code> 在30分钟后关机，其中<eot>是<code>ctrl+D</code>组合键表示输入结束 <code>atq</code>查询任务列表，第一列是编号 <code>atrm</code> 编号删除任务，在具体的时间执行任务如<code>at 00:00 2012-11-07</code>，禁止用户使用定时任务:添加用户名到<code>/etc/at.deny</code>中</eot></p>
<p><strong>周期性执行任务</strong>：<code>cron</code> 首先确定<code>crond</code>进程在运行。格式<code>* * * * * command</code> 即<code>分钟 小时 日期 月份 星期几</code></p>
<p>例子：1. <code>* * * * * service httpd restart = */1 * * * * service httpd restart</code> 每分钟重启httpd进程</p>
<p>2.<code>* 23-3/1 * * * service httpd restart</code> 从23点到3点，每小时重启httpd进程</p>
<p>3.<code>30 23 * * * service httpd restart</code> 每天晚上23点30分重启httpd进程</p>
<p>4.<code>30 23 1 * * service httpd restart</code> 每月的第一天晚上23点30分重启httpd进程</p>
<p>5.<code>30 23 * * 0 service httpd restart</code> 每周日晚上23点30分重启httpd进程</p>
<p>查看设置的任务 <code>crontab -l</code> 删除所有的任务 <code>crontab -r</code> 定时任务文件保存在<code>/var/spool/cron</code>目录，文件名与用户名一致，日志文件保存在<code>/var/log/cron</code>文件中</p>
<h2 id="Linux文件管理"><a href="#Linux文件管理" class="headerlink" title="Linux文件管理"></a>Linux文件管理</h2><p>根目录下目录结构：</p>
<p><code>/bin</code> 常见的用户指令</p>
<p><code>/boot</code> 内核和启动文件</p>
<p><code>/dev</code> 设备文件</p>
<p><code>/etc</code> 系统和服务的配置文件</p>
<p><code>/home</code> 系统默认的普通用户的家目录</p>
<p><code>/lib</code> 系统函数库目录</p>
<p><code>/lost+found</code> ext3文件系统需要的目录，用于磁盘检查</p>
<p><code>/mnt</code> 系统加载文件系统时常用的挂载点</p>
<p><code>/opt</code> 第三方软件安装目录</p>
<p><code>/proc</code> 虚拟文件系统</p>
<p><code>/root</code> root用户家目录</p>
<p><code>/sbin</code> 存放系统管理命令</p>
<p><code>/tmp</code> 临时文件的存放目录</p>
<p><code>/usr</code> 存放与用户直接相关的文件目录</p>
<p><code>/media</code> 用来挂载光驱等临时文件系统的挂载点</p>
<p><strong>概念</strong>：绝对路径：<code>/</code>开头 当前目录：<code>pwd</code> 当前目录：<code>.</code> 上层目录：<code>..</code> </p>
<p><strong>创建文件</strong>：<code>touch</code> 如果文件已经存在，那么这个命令不会对当前的同名文件造成影响，只会更新文件的创建时间属性</p>
<p><strong>删除文件</strong>：<code>rm</code></p>
<p><strong>移动文件</strong>: <code>mv</code> 可以重命名文件</p>
<p><strong>查看文件</strong>：<code>cat</code> 参数<code>-n</code>可以显示行号 <code>head</code> 查看文件前10行内容 <code>-n</code>参数指定行数 <code>tail</code> 查看文件后10行内容 <code>-f</code>命令动态查看</p>
<p><strong>文件格式转换</strong>：<code>dos2unix</code> 将windows下的dos格式的文本文件转换成unix下的文本文件，解决文本文件的换行符不同的冲突。</p>
<p><strong>目录操作</strong>：进入目录 <code>cd</code> 创建目录 <code>mkdir</code> <code>-p</code>一次性创建所有目录 删除空目录 <code>rmdir</code> <code>rm -rf</code> 递归删除目录 复制文件 <code>cp</code> <code>-r</code>参数复制目录 <code>touch</code>时间戳可以用来备份文件</p>
<p><strong>查看文件或目录的权限</strong>：<code>ls -al</code></p>
<p><img alt="KUvjIS.png" data-src="https://s2.ax1x.com/2019/10/24/KUvjIS.png" class="lozad"></p>
<p>第一列为文件类别和权限：<code>d</code> 目录，<code>-</code> 普通文件，<code>l</code> 链接文件，<code>b</code> 块文件，<code>c</code> 字符文件，<code>s</code> socket文件，<code>p</code> 管道文件</p>
<p>权限部分每三个字符一组，分别为user,group,others的权限，<code>r read w write x execute</code></p>
<p>第二列为连接数，文件连接数都是1，目录连接数是该目录中其他目录的总个数+2，文件如果有硬链接的话会不止1，每增加一个硬链接，增加1个连接数。</p>
<p>第三列为拥有者，第四列为拥有组，第五列为文件大小，字节为单位，使用-h参数可以以单位k显示</p>
<p>第六列为创建的时间或最近修改的时间，第七列是文件名。</p>
<p><strong>改变文件权限</strong>：<code>chmod u+r somefile</code>添加用户读权限 <code>chmod u+rwx somefile</code>添加用户对文件的读写执行权限</p>
<p><code>chmod 754 somefile</code> 设置拥有者的权限是<code>rwx</code>,拥有组的权限是<code>r-x</code>,其他人权限是<code>r--</code>,以此类推。<code>-R</code>参数递归设置该目录下所有文件和目录的权限。</p>
<p><strong>改变文件拥有者</strong>：<code>chown john a.txt</code>设置拥有者 <code>chown :john a.txt</code>设置用户组 <code>chown john:john a.txt</code>同时设置用户和组。-R递归设置。</p>
<p><strong>默认权限</strong>:对于root用户，文件的默认权限是<code>644</code>，目录的默认权限是<code>755</code>，对于普通用户，文件的默认权限是<code>664</code>，目录的默认权限是<code>775</code>。</p>
<p><strong>查看文件类型</strong>:<code>file</code></p>
<p><strong>一般查找</strong>：<code>find PATH -name FILENAME</code> 如：<code>find /etc -name fstab</code> <code>find / -name httpd*</code>  <code>-user</code>根据用户名查找，<code>-depth n</code> 最大的查找目录深度，<code>-type b/d/c/p/l/f/s</code> 查找<code>块/目录/字符/管道/链接/普通/套接字文件</code></p>
<p><strong>数据库查找</strong>：<code>locate 文件名</code>,依赖于用于记录文件的数据库，需要使用<code>updatedb</code>更新，系统每天会自动更新，必要时可主动更新。该命令查找出的结果是路径名中含有文件名的所有文件。</p>
<p><strong>查找执行文件</strong>:<code>which/whereis</code>。<code>which</code>用于从系统的PATH变量所定义的目录中查找可执行文件的绝对路径，如<code>which passwd</code>查找passwd命令在系统中的绝对路径。<code>whereis</code>不仅能找出其二进制文件，还能找出相关的man文件。</p>
<p><strong>文件压缩打包</strong>：<code>gzip/gunzip</code>用来压缩和解压缩单个文件，压缩文件后缀为<code>.gz</code>。<code>tar</code>命令可以将整个目录中的全部文件整合成一个包，后缀为<code>.tar</code>，还可以进一步压缩，后缀为<code>.tar.gz</code>，简写为<code>.tgz</code>。</p>
<p><code>tar -zcvf boot.tgz /boot</code> <code>-z</code> 使用gzip压缩，<code>-c</code> 创建压缩文件(create)，<code>-v</code>显示被压缩的文件(view)，<code>-f</code>指定文件名。</p>
<p><code>tar -zxvf boot.tgz</code> 解压缩boot.tgz成boot目录，可以使用<code>-C</code>指定解压目录。</p>
<p><code>bzip2</code>压缩文件，扩展名为<code>.bz2</code>,<code>bzip2 文件名</code>压缩，<code>-d</code>解压缩。</p>
<h2 id="Linux文件系统"><a href="#Linux文件系统" class="headerlink" title="Linux文件系统"></a>Linux文件系统</h2><p>文件系统是操作系统用于明确磁盘或分区上相关文件的方法和数据结构。即在<strong>磁盘上组织文件的方法</strong>。</p>
<p>使用前，都需要针对磁盘做初始化操作，并将记录的数据结构写到磁盘上，这种操作就是<strong>建立文件系统</strong>，或<strong>格式化</strong>。</p>
<p>大部分Linux系统都具有类似的通用结构，包括<strong>超级块</strong>：包括文件系统的总体信息，是文件系统的核心。<strong>i节点</strong>(inode)存储所有与文件有关的元数据，也就是文件所有者，权限等属性数据以及指向的数据块，但不包括文件名和文件内容。<strong>数据块</strong>是真实存放文件数据的部分，一个数据块默认4KB。<strong>目录块</strong>包括文件名和文件在目录中的位置，并包括文件的i节点信息</p>
<p>常用文件系统有<code>ext2</code>(不支持日志功能)，<code>ext3</code>(ext2的优化)，<code>ext4</code>等</p>
<p><strong>使用文件系统的步骤</strong>：存储介质选择->硬盘分区操作，创建分区来容纳文件系统，分区可以是整个硬盘也可以是部分硬盘->创建文件系统(格式化)->把它挂载到虚拟目录->写入配置文件<code>/etc/fstab</code>，每次重启时自动挂载</p>
<p>硬盘上，如果是MBR分区方式，那么主分区最多4个，或者三个主分区一个扩展分区，扩展分区上可以创建多个逻辑分区。</p>
<p>主分区主要用来启动操作系统，存放操作系统的启动或引导程序，<code>/boot</code>分区最好放在主分区上。</p>
<p>扩展分区不能使用的，它只是作为逻辑分区的容器存在，真正存放数据的是主分区和逻辑分区，大量数据都放在逻辑分区中。</p>
<p><code>fdisk</code>操作分区，<code>fdisk -l</code> 列出所有分区及磁盘信息。</p>
<p><code>mount</code>用来挂载分区到实际的目录上，不带参数会显示所有挂载。</p>
<p><code>/etc/fstab</code>存放了启动时挂载的信息。</p>
<p><code>fsck</code>命令尝试修复磁盘的逻辑错误，如机器突然掉电时可能引发。<code>fsck -t TYPE /DEVICE/PATH</code> TYPE是文件系统类型</p>
<p>检查磁盘时，需要磁盘是未挂载的状态，已挂载设备需要先umount解除挂载。<code>umount /DEVICE/PATH</code> 或者<code>umount MOUNT_POINT</code>都可以。成功后不会有任何提示，失败会报错。</p>
<p>如果跟根文件系统需要<code>fsck</code>时，是无法<code>umount</code>的，需要重启然后根据提示使用fsck修复。</p>
<p><strong>逻辑卷</strong>是用来解决设备在创建分区后不易修改分区大小的缺陷。通过将磁盘分区后将多个分区创建为物理卷，然后归到一个卷组中，再从卷组中划分存储空间创建逻辑卷，然后将逻辑卷挂载使用文件系统，实现动态的分区。其中卷组还可以动态添加其他分区来扩展存储空间。</p>
<p><strong>软链接</strong>是一个包含了另一个文件路径名的文件，类似于快捷方式，删除软链接不会删除源文件，删除源文件会出现“断链”</p>
<p><code>ln -s file01 file01_slink</code></p>
<p><strong>硬链接</strong>通过索引节点来进行链接，所有文件都会有一个编号成为inode,多个文件名指向同一个索引节点是被允许的，即硬链接。一个文件可以拥有多个有效路径名，删除最后一个硬链接会删除文件，不同分区中的文件不能创建硬链接，并且不能给目录创建硬链接。</p>
<p><code>ls -li</code>可以列出文件的inode编号，硬链接是同一编号，即同一个文件，软链接不是同一个编号，不是一个文件。</p>
<h2 id="Linux字符处理"><a href="#Linux字符处理" class="headerlink" title="Linux字符处理"></a>Linux字符处理</h2><p><strong>管道</strong>:固定大小的缓冲区，大小为1页，即4K字节。管道符<code>|</code>用于连接进程，输入输出重定向。</p>
<p>如：<code>ls -l /etc/init.d | more</code></p>
<p><strong>grep搜索文本</strong>:<code>grep [-ivnc] `需要匹配的字符`</code> 结果是基于行的，即匹配到相关信息会打印所有符合的行。</p>
<p><code>-i</code> 不区分大小写</p>
<p><code>-c</code> 统计匹配的行数</p>
<p><code>-n</code> 输出行号</p>
<p><code>-v</code> 反向匹配</p>
<p><strong>sort排序</strong>: <code>sort [-ntkr] `文件名`</code></p>
<p><code>-n</code> 采取数字排序</p>
<p><code>-t</code> 指定分隔符</p>
<p><code>-k</code> 指定第几列</p>
<p><code>-r</code> 反向排序</p>
<p><strong>uniq删除重复内容</strong>:<code>uniq [-ic]</code> 但uniq只会比对相邻的行，如果有连续相同的若干行则删除重复内容，仅输出一行。所以可以先sort排序后再uniq去除所有重复的行。</p>
<p><code>-i</code> 忽略大小写</p>
<p><code>-c</code> 计算重复行数</p>
<p><strong>cut截取文本</strong>:<code>cut -f 指定的列 -d 分隔符</code></p>
<p>如 <code>cat /etc/passwd | cut -f1,6 -d ':'</code> 打印出用户和这个用户的家目录。</p>
<p>或者<code>cat /etc/passwd | cut -f1,6-7 -d ':'</code> 同时打印出每位用户的登录shell</p>
<p><code>cut -c 指定列</code> 打印指定列的字符如<code>cat /etc/passwd | cut -c 1-5,7-10</code></p>
<p><strong>tr文本转换</strong>:<code>cat /etc/passwd | tr '[a-z]' '[A-Z]' | tr -d ':'</code>将/etc/passwd中的小写字母转换成大写字母，然后删除文本中的冒号。</p>
<p><strong>paste文本合并</strong>:<code>paste a.txt b.txt</code>将两个文本按行合并，中间用tab隔开。也可以使用<code>-d :</code>指定分隔符不是<code>tab</code>而是<code>:</code></p>
<p><strong>split分割大文件</strong>:<code>split -l 500 big_file.txt small_file_</code> 指定每500行为一个小文件</p>
<p><code>split -b 64m big_bin small_bin_</code> 二进制文件只能按照大小如64MB分割成小文件</p>
<h2 id="Linux网络管理"><a href="#Linux网络管理" class="headerlink" title="Linux网络管理"></a>Linux网络管理</h2><p><strong>ifconfig检查和配置网卡</strong>:输入ifconfig命令将会输出当前系统中所有处于活动状态的网络接口。</p>
<p><img alt="Kdp9Xj.png" data-src="https://s2.ax1x.com/2019/10/25/Kdp9Xj.png" class="lozad"></p>
<p><code>eth0</code>:表示以太网的第一块网卡。eth表示以太网，0表示第一块网卡。</p>
<p><code>Link encap</code>:封装方式是以太网。</p>
<p><code>HWaddr</code>:网卡的硬件地址(MAC地址)。</p>
<p><code>inet addr</code>:网卡当前的IP地址。</p>
<p><code>Bcast</code>:广播地址。</p>
<p><code>Mask</code>:掩码。</p>
<p><code>UP</code>:处于活动状态。</p>
<p><code>MTU</code>:最大存储单元,即此网卡一次所能传输的最大分包。</p>
<p><code>RX</code>:接收的包。</p>
<p><code>TX</code>:发送的包。</p>
<p><code>collision</code>:发生的冲突数，值不为0则网络可能存在故障。</p>
<p><code>txqueuelen</code>:传输缓冲区长度大小。</p>
<p><code>lo</code>:主机的环回地址，用于本地通信。</p>
<p><code>ifconfig</code>命令跟上具体设备的名称，则只显示指定设备信息，如<code>ifconfig eth0</code></p>
<p><code>ifconfig eth0 192.168.159.130 netmask 255.255.255.0</code>手动指定eth0的IP地址，或者可以简写为:</p>
<p><code>ifconfig eth0 192.168.159.130/24</code></p>
<p><code>ifconfig eth0 down/up</code> 关闭/开启eth0网卡。关闭后ifconfig命令不再显示eth0。</p>
<p><code>ifconfig -a</code>显示所有包括当前不活动的网卡。</p>
<p><strong>将IP配置信息写入配置文件：</strong>ifconfig命令的配置只是保存在当前运行的内核中，系统重启信息将丢失。</p>
<p>RedHat和CentOS系统的网络配置文件位置为<code>/etc/sysconfig/network-scripts</code>,eth0的配置文件为ifcfg-eth0,如果有第二块网卡，配置文件为ifcfg-eth1,以此类推。</p>
<p><img alt="KdFuwj.png" data-src="https://s2.ax1x.com/2019/10/25/KdFuwj.png" class="lozad"></p>
<p><code>DEVICE</code>为设备的名称</p>
<p><code>BOOTPROTO</code>定义了获取IP的方式，这里是静态设置，还有<code>dhcp</code>即通过dhcp协议动态分配。</p>
<p><code>ONBOOT</code>启动时是否激活使用该设备</p>
<p>修改配置文件后重启网卡或者网络服务，但远程登录一般使用第二种方式，因为两种方式都会断开网络，但是第二种会立即启用网络，只需要用新IP重新连接就行了。</p>
<p><code>ifconfig eth0 down</code> <code>ifconfig eth0 up</code></p>
<p><code>service network restart</code></p>
<p><strong>路由和网关设置</strong>：</p>
<p>添加默认网关:<code>route add default gw 192.169.159.2</code></p>
<p>删除默认网关:<code>route del default gw 192.169.159.2</code>简写为<code>route del default</code></p>
<p>查看路由表:<code>route -n</code></p>
<p><strong>DNS客户端配置</strong>：</p>
<p>hosts文件:<code>/etc/hosts</code></p>
<p>设置主机为DNS客户端的配置文件:<code>/etc/resolv.conf</code></p>
<p><img alt="KcUYbn.png" data-src="https://s2.ax1x.com/2019/10/28/KcUYbn.png" class="lozad"></p>
<p>nameserver后紧跟一个DNS主机的IP地址，可以设置2~3个nameserver,但是主机在查询域名时会首先查询第一个DNS，当该DNS不可用时才会查询第二个DNS，以此类推。</p>
<p><strong>网络测试工具</strong>:</p>
<p><code>ping IP</code> ping命令不会主动停止，需要使用Ctrl+C来停止，<code>-c</code>指定ping的次数，<code>-i</code>指定ping包的发送间隔，<code>-w</code>如果ping没有回应，则在指定超时时间后退出。</p>
<p><code>host 域名</code> 返回该域名的IP。</p>
<p><code>host 域名 IP</code> 第二个参数IP是一个可用的DNS服务器，也就是使用指定的DNS查询域名，而不是/etc/resolv.conf中定义的域名。</p>
<p><code>traceroute</code>用于检测数据包是如何经由路由器。利用了IP包结构中的TTL字段，不断累加TTL数值，使得包依次通过通往目标主机的各个节点，并且IP包中发送的是一个UDP包，其中指定的端口为主机不可能存在的端口，主机在接到这样的包后，由于端口不可达，主机会返回一个“端口不可达”的通知。</p>
<p>解决网络故障：</p>
<ol>
<li>利用<code>ping 127.0.0.1</code>确认网卡本身是否能正常工作。</li>
<li>确认是否能ping通同网段的其他主机。主要是确认二层网络设备(如交换机或HUB)工作是否正常。</li>
<li>确认是否能ping通网关IP，如果正常说明主机和本地网络都工作正常。</li>
<li>确认是否能ping通公网IP，如果可以说明本地路由设置正确。</li>
<li>确认是否能ping通公网上的某个域名，如果能说明DNS部分设置正确。</li>
</ol>
<h2 id="Linux进程管理"><a href="#Linux进程管理" class="headerlink" title="Linux进程管理"></a>Linux进程管理</h2><p>进程是<strong>程序的一次执行过程，是操作系统当前运行的程序。包括动态执行的程序和数据两部分</strong>。进程间存在<strong>互斥</strong>和<strong>同步</strong>的关系。互斥就是进程间不能同时运行，必须等待一个进程运行完毕，另一个进程才能运行。同步指的是进程间通过某种通信机制实现信息交互。</p>
<p><strong>进程的观察</strong>:<code>ps</code>,<code>top</code></p>
<p>ps参数有:</p>
<p><code>-A/-e</code>列出所有的进程</p>
<p><code>-a</code>列出不和本终端有关的所有进程</p>
<p><code>-x</code>列出系统中属于自己的进程</p>
<p><code>-u</code>启动这个进程的用户和它启动的时间</p>
<p><code>-f</code>用ASCII字符显示树状结构，表达程序间的相互关系</p>
<p><code>ps -aux</code>输出：</p>
<p><a href="https://imgchr.com/i/KcTzNt" target="_blank" rel="noopener"><img alt="KcTzNt.md.png" data-src="https://s2.ax1x.com/2019/10/28/KcTzNt.md.png" class="lozad"></a></p>
<p><code>User</code>:进程拥有者</p>
<p><code>PID</code>:pid</p>
<p><code>%CPU</code>:CPU占用率</p>
<p><code>%MEM</code>:内存占用率</p>
<p><code>VSZ</code>:占用的虚拟内存大小</p>
<p><code>TTY</code>:运行的终端号码</p>
<p><code>STAT</code>:进程状态：<code>D</code>不可中断 <code>R</code>运行中 <code>S</code>休眠 <code>T</code>暂停 <code>Z</code>僵尸进程 <code>W</code>没有足够的内存可分配 <code><</code>高优先级进程 <code>N</code>低优先级进程</p>
<p><code>START</code>:进程开始时间</p>
<p><code>TIME</code>:累计使用CPU的时间</p>
<p><code>COMMAND</code>:执行的命令</p>
<p>其他命令：<code>ps -u root</code>根据用户过滤进程 </p>
<p><code>ps -aux --sort -pcpu|less</code>根据CPU使用来降序排序</p>
<p><code>ps -aux --sort -pmem|less</code>根据内存使用来降序排序</p>
<p><code>ps -aux --sort -pcpu,+pmem|head -n 10</code>根据CPU降序，内存升序显示前10个结果</p>
<p><code>ps -C getty</code>通过进程名或PID过滤 <code>ps -f -C getty</code>过滤后显示更多的细节</p>
<p><code>pstree</code>树形显示进程</p>
<p>top命令可以动态的查看进程：</p>
<p><a href="https://imgchr.com/i/KcX2Ps" target="_blank" rel="noopener"><img alt="KcX2Ps.md.png" data-src="https://s2.ax1x.com/2019/10/28/KcX2Ps.md.png" class="lozad"></a></p>
<p>第一行是<strong>服务器基础信息</strong>，包括<strong>top命令的刷新时间</strong>为18:51:45,<strong>系统已经启动的时间</strong>为130天18小时22分钟，当前有两个<strong>用户登录</strong>，系统的<strong>负载</strong>为：最近1分钟内的平均系统负载为0.28,最近5分钟内的平均系统负载为0.09,最近15分钟内的平均系统负载为0.03(系统基本是闲置的)。</p>
<p>第二行是<strong>当前系统进程概况</strong>，一共有97个进程，1个正在<strong>运行中</strong>，86个处于<strong>休眠</strong>，没有<strong>停止</strong>的进程，没有<strong>僵尸进程</strong>。</p>
<p>第三行是CPU信息，<code>us</code>代表<strong>用户空间</strong>占用的CPU，<code>sy</code>代表<strong>内核空间</strong>占用的CPU，<code>ni</code>代表<strong>改变过优先级</strong>的进程占用的CPU，<code>id</code>代表<strong>空闲</strong>CPU百分比，<code>wa</code>代表<strong>IO等待</strong>百分比，<code>hi</code>代表<strong>硬中断</strong>占用的CPU百分比，<code>si</code>代表<strong>软中断</strong>占用的CPU百分比。要想查看<strong>每个逻辑CPU</strong>的使用情况，可以在top界面中按<strong>数字键1</strong>。</p>
<p>第四行是<strong>物理内存</strong>的使用状态，从左到右分别表示<strong>物理内存总量，已使用的内存，空闲内存，缓存使用的内存</strong>。</p>
<p>第五行是<strong>虚拟内存</strong>的使用状态，其中，前三列和物理内存的意义一致，最后一个代表<strong>缓冲的交换区总量</strong>。</p>
<p>下面为<strong>进程信息区</strong>，只有默认显示的11个字段，如果要显示更多的字段，可以按<strong>字母键f</strong>，进入后前面打了*号的就是当前显示的字段，若想显示更多字段则按一下字段前面对应的键。</p>
<p>默认top界面是按照<strong>CPU使用率</strong>来进行排序的。可以按<strong>大写字母O</strong>进入排序选择页，然后按一下字段前面对应的键来选择排序字段，按回车键返回即可。</p>
<p>top命令动态进程信息中每列的含义：</p>
<p><code>PID</code> 进程id</p>
<p><code>USER</code> 进程所有者</p>
<p><code>PR</code> 进程优先级</p>
<p><code>NI</code> nice值，负值表示高优先级，正值表示低优先级</p>
<p><code>VIRT</code> 进程使用的虚拟内存总量，单位Kb,VIRT=SWAP+RES</p>
<p><code>RES</code> 进程使用的未被换出的物理内存大小，单位为Kb,RES=CODE+DATA</p>
<p><code>SHR</code> 共享内存大小，单位Kb</p>
<p><code>%CPU</code> 上次更新到现在的CPU时间占用百分比</p>
<p><code>%MEM</code> 进程使用的物理内存百分比</p>
<p><code>TIME+</code> 进程使用的CPU时间总计，单位为1/100秒</p>
<p><code>COMMAND</code> 进程名称(命令名/命令行)</p>
<p><strong>top页面快捷键</strong>：P键按照CPU使用率排序，M键按照Memory使用率排序，N键以PID排序，T键按使用CPU时间排序，K键则表示kill进程，R键可以renice一个进程。</p>
<p><code>pidof 命令名</code>找出对应命令的进程id，或者使用<code>ps -ef|grep 进程名</code>找出对应进程，方便分辨父子进程。</p>
<p><code>kill -1 pid</code>原地重启进程，不会改变主进程PID，“软重启”。</p>
<p><code>kill -15 pid</code>使进程正常退出，是linux默认的程序中断信号，不加参数时使用的信号。</p>
<p><code>kill -9 pid</code>立即杀死进程，而且该信号无法被阻塞或忽略，但可能没有清理之前申请的内存，会造成一定程度的“内存泄漏”</p>
<p><code>killall 进程名</code>停止对应的所有进程，如<code>killall httpd</code></p>
<p><code>lsof filename</code>显示打开指定文件的所有进程。如：<code>lsof /var/log/messages</code></p>
<p><code>lsof -i:端口</code>查找使用了某个端口的进程。</p>
<p>top中的NI字段标记进程的优先级，取值范围为-20~19，数值越低代表优先级越高，PR字段也是优先级，进程的最终优先级等于优先级(PR)+nice优先级(NI)。</p>
<p><code>nice</code>命令仅限于在启动一个进程的时候同时赋予其nice优先级，如<code>nice -n -10 ./job.sh</code>。</p>
<p>已经启动的进程，使用<code>renice</code>命令修改优先级：<code>renice -10 -p PID</code></p>
<h2 id="Vi编辑器"><a href="#Vi编辑器" class="headerlink" title="Vi编辑器"></a>Vi编辑器</h2><p><strong>vi编辑器三种模式</strong>：</p>
<ul>
<li>一般模式：默认模式，可以使用方向键移动光标，复制，粘贴，删除。</li>
<li>编辑模式：i键进入编辑模式，可以移动光标，并输入文字，回到一般模式需要按Esc键。</li>
<li>末行指令模式：按冒号(:),斜杠键(/),问号键(?)进入末行指令模式。</li>
</ul>
<p><strong>vi常用命令</strong>：</p>
<p><strong>移动</strong>:</p>
<p><code>$</code> 移动到本行末尾</p>
<p><code>0</code> 移动到行首</p>
<p><code>G</code> 移动到整个文件的末尾</p>
<p><code>gg</code> 移动到整个文件的开头</p>
<p><code>:n</code> 移动到第n行，需要回车</p>
<p><code>n</code> 往下移动n行，需要回车</p>
<p><code>Ctrl+f</code> 往下移动一页</p>
<p><code>Ctrl+b</code> 往上移动一页</p>
<p><code>Ctrl+d</code> 往下移动半页</p>
<p><code>Ctrl+u</code> 往上移动半页</p>
<p><strong>删除</strong>：</p>
<p><code>ndd</code> 删除包括光标所在行在内的n行文字</p>
<p><code>dw</code> 删除光标往后的一个单词</p>
<p><code>d$</code> 删除光标至最后的所有文本</p>
<p><code>x</code> 向后删除一个字符</p>
<p><code>X</code> 向前删除一个字符</p>
<p><strong>复制粘贴</strong>：</p>
<p><code>yw</code> 复制一个单词</p>
<p><code>yy</code> 复制光标所在的行</p>
<p><code>nyy</code> 复制连同光标所在行在内的n行文字</p>
<p><code>p</code> 将复制的文本粘贴在光标下面一行</p>
<p><strong>撤销重做</strong>：</p>
<p><code>u</code> 撤销操作</p>
<p><code>Ctrl+r</code> 重做操作</p>
<p><strong>关联外部</strong>：</p>
<p><code>:! 外部命令</code> 在编辑文档时执行外部命令</p>
<p><code>:r FILENAME</code> 向当前文件中插入另一个文件的内容，<code>FILENAME</code>是另一个文件的全路径。</p>
<p><code>:r !外部命令</code> 将外部命令的输出插入到当前文件，如<code>:r!ls</code></p>
<p><strong>查找</strong>：</p>
<p>输入<code>/</code>符号查找关键字，搜索到的关键字是以当前的光标为相对位置，往下找到的第一个关键字。可以按<code>n</code>键继续往下找，每按一次将跳至下一个关键字处，如果想往上寻找，则按大写字母<code>N</code>。</p>
<p>输入<code>?</code>符号往上查找关键字，<code>n</code>键继续往上寻找，<code>N</code>键向下寻找。</p>
<p><strong>替换</strong>：</p>
<p><code>R</code> 连续替换多个字符，和编辑模式类似，只是输入的每个字符都会替换当前光标上的字符</p>
<p><code>:n1,n2s/word1/word2/g</code> 将n1到n2行之间所有的word1替换成word2</p>
<p><code>:1,$s/word1/word2/g</code> 将第1行到最后一行的所有word1替换成word2</p>
<p><code>:s/word1/word2/g</code> 将本行的word1替换成word2</p>
<p><code>:s/word1/word2</code> 将本行第一次出现的word1替换成word2</p>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p><strong>基础正则表达式</strong>：</p>
<p><code>.</code>点符号匹配除换行外的任一个字符。</p>
<p><code>*</code>符号匹配<strong>前一个字符</strong>0次或任意多次，如ab<em>->a,ab,abb等。而*</em>.***代表任意长度的不包含换行的字符。</p>
<p><code>\{n\}</code>匹配前面的字符n次，如<code>ro\{2\}t</code>匹配root。</p>
<p><code>\{n,\}</code>匹配前面的字符至少n次以上。如<code>ro\{0\}t</code></p>
<p><code>\{n,m\}</code>匹配前面的字符n到m次</p>
<p><code>^</code>匹配开头的字符，如<code>^root</code></p>
<p><code>$</code>匹配尾部的字符，如<code>abc$</code>匹配以abc结尾的行，<code>^$</code>表示该行为空，<code>^r.*h$</code>匹配以r开头，中间有一串任意字符，以h结尾的行。</p>
<p><code>[]</code>匹配方括号内出现的任一字符，遇到较大范围的匹配，需要使用<code>“-”</code>做范围限定。如<code>[A-Z]</code>,<code>[A-Za-z]</code>,如果匹配不是[]中的字符，则需要加<code>^</code>在括号中代表取反。</p>
<p>匹配1开头第二位是3或8后面连续9个任意数字的电话号码：<strong>^1[38][0-9]\{9\}</strong></p>
<p><code>\</code>符号为转义字符，只匹配字符本身，方便使用特殊字符。</p>
<p><code>\<</code>和<code>\></code>符号分别界定单词的左边界和右边界，如<code>\<hello</code>匹配以”hello”开头的单词；<code>hello\></code>匹配以”hello“结尾的单词，<code>\<\></code>用于精确匹配一个字符串，所以<code>\<hello\></code>可精确匹配单词hello，而不是helloworld等。</p>
<p><code>\d</code>匹配一个数字，等价于<code>[0-9]</code>,使用grep命令匹配时，需要加上<code>-P</code>参数，如<code>echo 123|grep -P '\d'</code></p>
<p><code>\b</code>匹配单词的边界，如<code>\bhello\b</code>精确匹配hello单词。</p>
<p><code>\B</code>匹配非单词的边界，如<code>hello\B</code>匹配”helloworld”中的hello,<code>echo "helloworld"|grep 'hello\B'</code>-><code>helloworld</code></p>
<p><code>\w</code>匹配字母，数字和下划线，等价于<code>[A-Za-z0-9]</code></p>
<p><code>\W</code>匹配非字母，非数字，非下划线，等价于<code>[^A-Za-z0-9]</code></p>
<p><code>\n</code>换行符，<code>\r</code>回车符，<code>\t</code>制表符，<code>\f</code>换页符，<code>\s</code>任何空白字符，<code>\S</code>任何非空白字符。</p>
<p><strong>扩展正则表达式</strong>：</p>
<p><code>?</code>匹配前一个字符0次或1次，如<code>ro?t</code>匹配rot或rt</p>
<p><code>+</code>匹配前一个字符1次以上，如<code>ro+t</code>匹配rot,root等</p>
<p><code>|</code>或符号，匹配多种可能的罗列。</p>
<p><code>()</code>符号通常和<code>|</code>符号联合使用，用于枚举一系列可替换的字符，类似于<code>[]</code>，但<code>()</code>和<code>|</code>可以做的更多如<code>h(ar|oo|ol)d</code>匹配hard,hold,hood。</p>
<p>扩展正则表达式需要使用<code>egrep</code>命令。</p>
<p><strong>通配符</strong>：</p>
<p><code>*</code>代表0个或多个字符，如<code>ls -l *.doc</code>列出所有doc文件</p>
<p><code>?</code>代表一个字符，如<code>ls -l A?.doc</code>列出以字母A开头，但是只有两个字母的文件名的doc文件</p>
<p><code>{}</code>匹配所有括号内包含的以逗号隔开的字符，如<code>ls -l {A,B,C}.doc</code>或<code>ls -l [A-C].doc</code>,</p>
<p><code>ls -l {[A-Z]*.doc,[0-9]??.txt}</code></p>
<p><code>^</code>和<code>!</code>符号代表取反，不匹配。</p>
<p><strong>正则表达式主要使用在对文件内容的匹配上，而通配符主要是用在文件名的匹配上。</strong></p>
<p><strong>文本处理工具sed</strong>:</p>
<p>sed是<strong>非交互式</strong>的流编辑器，sed<strong>不会改变源文件</strong>，而只是对文本进行修改打印到标准输出中。sed处理文本时<strong>以行为单位</strong>，每处理完一行就立即打印出来，然后再处理下一行，直至全文处理结束。包括<strong>删除，查找替换，添加，插入，从其他文件中读入数据</strong>等。</p>
<p><strong>sed适合处理</strong>：</p>
<ul>
<li>常规编辑器编辑困难的文本。</li>
<li>过于庞大的文本。</li>
<li>有规律的文本修改，加快文本处理速度(如全文替换)</li>
</ul>
<p><strong>删除</strong>：</p>
<p><code>sed '1d' Sed.txt</code> 将file的第一行删除后输出到屏幕。</p>
<p><code>sed '1d' Sed.txt >saved_file</code> 将修改后的文件保存到指定文件。</p>
<p><code>sed -i '1d' file</code> 直接修改源文件，删除第一行。</p>
<p><code>sed '1,3d' Sed.txt</code> 删除指定范围的行。</p>
<p><code>sed '1,$d' Sed.txt</code> 清空文件</p>
<p><code>sed '$d' Sed.txt</code> 删除最后一行</p>
<p><code>sed '5!d' Sed.txt</code> 删除指定范围以外的行</p>
<p><code>sed '/Empty/d' Sed.txt</code> 删除所有包含Empty的行</p>
<p><code>sed '/^$/d' Sed.txt</code> 删除空行</p>
<p><strong>查找替换</strong>：</p>
<p>s命令用于替换文本。</p>
<p><code>sed 's/line/LINE/' Sed.txt</code> 使用LINE替换line，默认只替换第一次匹配到的内容</p>
<p><code>sed 's/line/LINE/n Sed.txt'</code> 替换最多n个line为LINE</p>
<p><code>sed 's/line/LINE/g Sed.txt'</code> 全局替换所有line为LINE</p>
<p><code>sed 's/^this/that/' Sed.txt</code> 只替换每一行开头的this为that</p>
<p><strong>字符转换</strong>：</p>
<p>y命令用于字符转换。</p>
<p><code>sed 'y/OLD/NEW' file</code> 将file中的O转换为N，L转换为E，D转换为W，转换字符和被转换字符长度要相等。</p>
<p><strong>插入文本</strong>：</p>
<p>i命令在匹配行之前插入，a命令在匹配行之后插入。</p>
<p><code>sed '2 i Insert' Sed.txt</code> 在第二行前插入文本。</p>
<p><code>sed '2 a Insert' Sed.txt</code> 在第二行后插入文本。</p>
<p><strong>读入文本</strong>：</p>
<p>r命令从其他文件中读取文本，并插入匹配行之后。</p>
<p><code>sed '/^$/r /etc/passwd' Sed.txt</code> 将/etc/passwd中的内容读出放到Sed.txt空行之后。</p>
<p><strong>打印</strong>：</p>
<p>p命令进行打印。使用时加上<code>-n</code>参数，表示不打印没关系的行，只输出处理过的行。相当于删除操作的“逆操作”。</p>
<p><code>sed -n '1p' Sed.txt</code> 打印出文件中指定的行。</p>
<p><code>sed -n 's/the/THE/p' Sed.txt</code> 替换第一个the为THE并只打印替换过的行。</p>
<p><strong>写文件</strong>：</p>
<p><code>sed -n '1,2 w output' Sed.txt</code> 输出第1,2行到output文件。</p>
<p><strong>sed脚本</strong>：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s/this/THAT/g</span><br><span class="line">/^$/d</span><br></pre></td></tr></tbody></table></figure>

<p>该脚本的作用是将全文的this改为THAT，并删除所有空行。</p>
<p>使用-f参数指定脚本应用于Sed.txt:<code>sed -f Sed.rules Sed.txt</code></p>
<p><strong>高级替换</strong>:</p>
<p>n命令用于修改匹配行的下一行的文本。</p>
<p><code>sed '/^$/{n;s/line/LINE/g}' Sed.txt</code> Sed.txt文件中有一行空白行，将该空格行的下一行中的line替换为LINE。</p>
<p><strong>文本处理工具awk</strong>:</p>
<p>awk是按列处理的工具，awk认为文件是结构化的，是由单词和各种空白字符组成的，空白字符包括空格，Tab，以及连续的空格和Tab等,例如下面的文件。每个非空白的部分叫做“域”，从左到右依次是第一个域，第二个域等，$1，$2分别用于表示域，$0表示全部域。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">john.wang Male 30 021-11111111</span><br><span class="line">lucy.yang Female 25 021-22222222</span><br><span class="line">jack.chen Male 35 021-33333333</span><br><span class="line">lily.gong Female 20 021-444444444 Shanghai</span><br></pre></td></tr></tbody></table></figure>

<p><code>awk '{print $1,$4}' Awd.txt</code> 只打印姓名和电话号码</p>
<p><code>awk '{print $0}' Awd.txt</code> 打印全部内容</p>
<p><code>awk -F . '{print $1,$2}' Awd.txt</code> 默认分隔符是空白字符，使用-F指定分隔符</p>
<p><code>awk '{print NF}' Awd.txt</code> 打印每一行有多少列</p>
<p><code>awk '{print $NF}' Awd.txt</code> 打印最后一列</p>
<p><code>awk '{print $(NF-1)}' Awd.txt</code> 打印倒数第二行</p>
<p><code>cat Awd.txt | awk '{print substr($1,6)}'</code> 输出Awk.txt文件第一个域的第六个字符到最后一个字符的内容</p>
<p><code>cat Awd.txt | awk '{print length}'</code> 输出每一行的长度</p>
<p><code>cat Awd.txt | awk 'BEGIN{total=0}{total+=$3}END{print total}'</code> 求所有年龄的和</p>
<p><code>cat Awd.txt | awk 'BEGIN{total=0}{total+=$3}END{print total/NR}'</code> 求平均年龄</p>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Huang Qingshan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://alifebug.github.io/2019/10/24/Linux/">http://alifebug.github.io/2019/10/24/Linux/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://ALifeBug.github.io">ALifeBug</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux    </a></div><div class="post_share"><div class="social-share" data-image="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.png"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.png"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/10/24/Kakfa%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev_cover lozad" data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>Kafka基础</span></div></a></div><div class="next-post pull-right"><a href="/2019/10/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><img class="next_cover lozad" data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>设计模式概述</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/12/11/Linux查看日志/" title="Linux查看日志"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">Linux查看日志</div></a></div><div class="relatedPosts_item"><a href="/2020/12/11/curl和wget的区别和使用/" title="curl和wget的区别和使用"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">curl和wget的区别和使用</div></a></div><div class="relatedPosts_item"><a href="/2020/12/11/Crontab/" title="Crontab"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">Crontab</div></a></div><div class="relatedPosts_item"><a href="/2020/12/11/Linux的配置文件/" title="Linux的配置文件"><img class="relatedPosts_cover lozad"data-src="https://s2.ax1x.com/2019/11/04/Kv8O6U.jpg"><div class="relatedPosts_title">Linux的配置文件</div></a></div></div><div class="clear_both"></div></div></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2020 By Huang Qingshan</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">简</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>